--- 
title: 'Geocomputation with R'
author:
- Robin Lovelace
- Jakub Nowosad
date: '`r Sys.Date()`'
knit: bookdown::render_book
site: bookdown::bookdown_site
documentclass: book
bibliography:
  - refs.bib
  - packages.bib
biblio-style: apalike
link-citations: yes
github-repo: Robinlovelace/geocompr
url: https\://Robinlovelace.github.io/geocompr/
---

```{r, echo=FALSE, include=FALSE}
# source("code/before_script.R")
```

# Prerequisites {-}

To run the following code you must have **sf** installed, e.g. via:

```{r, eval=FALSE}
install.packages("sf") # for the stable version
```

or 

```{r, eval=FALSE}
devtools::install_github("edzer/sfr") # for the development version
```

You need a recent version of the GDAL, GEOS, Proj.4 and UDUNITS libraries installed for this to work on Mac and Linux. See the package's [README](https://github.com/edzer/sfr) for information on that.

## Book statistics {-}

An indication of the book's progress over time is illustrated below (to be updated roughly every week as the book progresses).

```{r, echo=FALSE, message=FALSE, warning=FALSE}
# Should eventually be n_pages
source("R/generate-chapter-code.R") # shouldn't have to run this
book_stats = readr::read_csv("extdata/word-count-time.csv")
if(Sys.Date() > max(book_stats$date)) {
       book_stats_new = generate_book_stats()
       book_stats = bind_rows(book_stats, book_stats_new)
       readr::write_csv(book_stats, "extdata/word-count-time.csv")
}
library(ggplot2)
book_stats$chapter = formatC(book_stats$chapter, width = 2, format = "d", flag = "0")
book_stats$n_pages = book_stats$n_words / 300
```

```{r bookstats, warning=FALSE}
ggplot(book_stats) +
        geom_area(aes(date, n_pages, fill = chapter), position = "stack") +
        ylab("Estimated number of pages")
```

Book statistics: estimated number of pages per chapter

