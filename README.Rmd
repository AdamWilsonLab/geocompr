---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file - rmarkdown::render('README.Rmd', output_format = 'md_document', output_file = 'README.md') -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Geocomputation with R  

# Introduction

This repository hosts the code underlying Geocomputation with R, a book by [Robin Lovelace](http://robinlovelace.net/) and [Jakub Nowosad](https://nowosad.github.io/).

This book will be developed in the open and published by CRC Press in late 2018.

## Contributing

We encourage contributions on any part of the book, including:

- Improvements to the text, e.g. clarifying unclear sentences, fixing typos (see guidance from [Yihui Xie](https://yihui.name/en/2013/06/fix-typo-in-documentation/)).
- Changes to the code, e.g. to do things in a more efficient way.
- Suggestions on content (see the project's [issue tracker](https://github.com/Robinlovelace/geocompr/issues)).

Please see [style.md](https://github.com/Robinlovelace/geocompr/blob/master/style.md) for the book's style.

Note: the `.Rproj` file is configured to build a website not a single page.
To reproduce this [README](https://github.com/Robinlovelace/geocompr/blob/master/README.Rmd) use the following command:

```{r, eval=FALSE}
knitr::knit("README.Rmd")
```

## Reproducing the book

To ease reproducibility, this book is also a package. Installing it from GitHub will ensure all dependencies are available on your computer (you need [**devtools**](https://github.com/hadley/devtools)):

```{r, eval=FALSE}
devtools::install_github("robinlovelace/geocompr")
```

You need a recent version of the GDAL, GEOS, Proj.4 and UDUNITS libraries installed for this to work on Mac and Linux. See the **sf** package's [README](https://github.com/edzer/sfr) for information on that.

Once the dependencies have been installed you should be able to build and view a local version the book with:

```{r, eval=FALSE}
bookdown::render_book("index.Rmd") # to build the book
browseURL("_book/index.html") # to view it
```


## Book statistics

An indication of the book's progress over time is illustrated below (to be updated roughly every week as the book progresses).

```{r, echo=FALSE, message=FALSE, warning=FALSE}
# Should eventually be n_pages
source("R/generate-chapter-code.R") # shouldn't have to run this
book_stats = readr::read_csv("extdata/word-count-time.csv")
if(Sys.Date() > max(book_stats$date)) {
       book_stats_new = generate_book_stats()
       book_stats = bind_rows(book_stats, book_stats_new)
       readr::write_csv(book_stats, "extdata/word-count-time.csv")
}
library(ggplot2)
book_stats$chapter = formatC(book_stats$chapter, width = 2, format = "d", flag = "0")
book_stats$n_pages = book_stats$n_words / 300
```

```{r bookstats, warning=FALSE, eval=FALSE}
ggplot(book_stats) +
        geom_area(aes(date, n_pages, fill = chapter), position = "stack") +
        ylab("Estimated number of pages")
```

Book statistics: estimated number of pages per chapter over time.
